(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[41],{962:function(e,t,s){Promise.resolve().then(s.bind(s,7804))},7804:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return l}});var a=s(7437),r=s(2265),n=s(6702);function l(e){var t,s,l;let{params:i}=e,[c,o]=(0,r.useState)(null),[d,m]=(0,r.useState)([]),[h,x]=(0,r.useState)([]),[u,g]=(0,r.useState)(!0),[f,y]=(0,r.useState)(null),[b,p]=(0,r.useState)("meets"),[j,v]=(0,r.useState)(1);(0,r.useEffect)(()=>{N()},[i.id]);let N=async()=>{try{g(!0),y(null);let e=await n.kd.getAll(),t=null==e?void 0:e.find(e=>e.id===i.id);if(!t)throw Error("Course not found");o(t);let s=await n.Bj.getAll(),a=(null==s?void 0:s.filter(e=>e.course_id===i.id))||[];m(a),x([])}catch(e){console.error("Error loading course data:",e),y("Failed to load course data")}finally{g(!1)}},w=e=>{let t=new Date(e);return isNaN(t.getTime())?"Invalid Date":t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})},_="meets"===b?d:h,k=Math.ceil(_.length/25),O=(j-1)*25,Q=O+25,C=_.slice(O,Q);return u?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-xl font-semibold mb-2",children:"Loading Course Details..."}),(0,a.jsx)("div",{className:"text-gray-600",children:"Getting course information..."})]})}):f||!c?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center max-w-md mx-auto",children:[(0,a.jsx)("div",{className:"text-xl font-semibold mb-2 text-red-600",children:"Error"}),(0,a.jsx)("div",{className:"text-gray-600 mb-4",children:f||"Course not found"}),(0,a.jsx)("a",{href:"/courses",className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Back to Courses"})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsxs)("div",{className:"container mx-auto px-6 py-8",children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("nav",{className:"text-sm text-gray-600",children:[(0,a.jsx)("a",{href:"/",className:"hover:text-green-600",children:"Home"}),(0,a.jsx)("span",{className:"mx-2",children:"/"}),(0,a.jsx)("a",{href:"/courses",className:"hover:text-green-600",children:"Courses"}),(0,a.jsx)("span",{className:"mx-2",children:"/"}),(0,a.jsx)("span",{className:"text-black font-medium",children:c.name})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow mb-6 p-6",children:(0,a.jsx)("div",{className:"flex justify-between items-start",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-black mb-4",children:c.name}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Distance:"}),(0,a.jsxs)("div",{className:"font-bold text-black",children:[null===(t=c.distance_miles)||void 0===t?void 0:t.toFixed(2)," miles"]}),(0,a.jsxs)("div",{className:"text-gray-500",children:[c.distance_meters,"m"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Difficulty vs Track Mile:"}),(0,a.jsx)("div",{className:"mt-1",children:null!==c.mile_difficulty?(0,a.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,a.jsx)("span",{className:"px-2 py-1 rounded text-sm font-semibold ".concat((s=c.mile_difficulty)>=1.2?"bg-red-100 text-red-800":s>=1.15?"bg-orange-100 text-orange-800":s>=1.05?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"," inline-block w-fit"),children:(l=c.mile_difficulty)>=1.2?"Very Hard":l>=1.15?"Hard":l>=1.05?"Moderate":"Fast"}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[c.mile_difficulty.toFixed(3),"x vs track mile"]})]}):(0,a.jsx)("span",{className:"px-2 py-1 rounded text-sm bg-gray-100 text-gray-800",children:"Not Rated"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"XC Time Rating:"}),(0,a.jsx)("div",{className:"mt-1",children:null!==c.xc_time_rating?(0,a.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,a.jsx)("span",{className:"px-2 py-1 rounded text-sm font-semibold bg-blue-100 text-blue-800 inline-block w-fit",children:c.xc_time_rating.toFixed(3)}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"Crystal Springs conversion"})]}):(0,a.jsx)("span",{className:"px-2 py-1 rounded text-sm bg-gray-100 text-gray-800",children:"No Rating"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Statistics:"}),(0,a.jsxs)("div",{className:"font-bold text-black",children:[d.length," meets held"]}),(0,a.jsxs)("div",{className:"text-gray-500",children:[c.total_results_count||0," total results"]})]})]})]})})}),(0,a.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("svg",{className:"h-5 w-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),(0,a.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,a.jsx)("strong",{children:"Rating System:"})," The difficulty rating shows how much harder this course is compared to a 1-mile track race. For example, 1.125 means 12.5% harder than track mile. The XC Time Rating converts times to Crystal Springs 2.95-mile equivalents for fair comparison across courses."]})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow mb-6",children:[(0,a.jsx)("div",{className:"border-b",children:(0,a.jsxs)("nav",{className:"flex space-x-8 px-6",children:[(0,a.jsxs)("button",{onClick:()=>{p("meets"),v(1)},className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("meets"===b?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:["Meets on Course (",d.length,")"]}),(0,a.jsxs)("button",{onClick:()=>{p("results"),v(1)},className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("results"===b?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:["All Results on Course (",h.length,")"]})]})}),(0,a.jsxs)("div",{className:"p-6",children:["meets"===b?(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-black mb-4",children:"Meets Held on This Course"}),0===d.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-gray-500 mb-4",children:"No meets found for this course."}),(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"Meets may not have been imported yet."})]}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b text-left bg-gray-50",children:[(0,a.jsx)("th",{className:"py-3 px-4 font-bold text-black",children:"Meet Name"}),(0,a.jsx)("th",{className:"py-3 px-4 font-bold text-black",children:"Date"}),(0,a.jsx)("th",{className:"py-3 px-4 font-bold text-black",children:"Gender"}),(0,a.jsx)("th",{className:"py-3 px-4 font-bold text-black",children:"Type"}),(0,a.jsx)("th",{className:"py-3 px-4 font-bold text-black",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:C.map(e=>(0,a.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsx)("a",{href:"/races/".concat(e.id),className:"font-bold text-green-600 hover:text-green-800 transition-colors",children:e.name||"Unknown Meet"})}),(0,a.jsx)("td",{className:"py-3 px-4 text-black",children:w(e.meet_date||new Date)}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded text-sm font-semibold ".concat("Boys"===e.gender?"bg-blue-100 text-blue-800":"Girls"===e.gender?"bg-pink-100 text-pink-800":"bg-gray-100 text-gray-800"),children:e.gender||"N/A"})}),(0,a.jsx)("td",{className:"py-3 px-4 text-black",children:e.meet_type||"N/A"}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsx)("a",{href:"/races/".concat(e.id),className:"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700 transition-colors",children:"View Results"})})]},e.id))})]})})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-black mb-4",children:"All Results on This Course"}),(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-gray-500 mb-4",children:"Results data coming soon."}),(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"This feature will show all individual race results from every meet held on this course, with XC Time equivalents for fair performance comparison."})]})]}),k>1&&(0,a.jsxs)("div",{className:"flex items-center justify-between mt-6 pt-4 border-t",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Showing ",O+1,"-",Math.min(Q,_.length)," of ",_.length," ",b]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>v(Math.max(1,j-1)),disabled:1===j,className:"px-3 py-2 border rounded text-black disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),(0,a.jsx)("button",{onClick:()=>v(Math.min(k,j+1)),disabled:j===k,className:"px-3 py-2 border rounded text-black disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]})]})]})]}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)("a",{href:"/courses",className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 transition-colors",children:"â† Back to All Courses"})})]})})}},6702:function(e,t,s){"use strict";s.d(t,{Ab:function(){return c},Bj:function(){return l},jZ:function(){return r},kI:function(){return n},kd:function(){return i}});var a=s(7823);let r={async getAll(){let{data:e,error:t}=await a.OQ.from("athletes").select("\n        *,\n        school:schools(id, name)\n      ").order("last_name");if(t)throw t;return e},async getById(e){let{data:t,error:s}=await a.OQ.from("athletes").select("\n        *,\n        school:schools(*)\n      ").eq("id",e).single();if(s)throw s;return t},async getTotalCount(){let{count:e,error:t}=await a.OQ.from("athletes").select("*",{count:"exact",head:!0});if(t)throw t;return e},async create(e){let{data:t,error:s}=await a.OQ.from("athletes").insert(e).select("\n        *,\n        school:schools(name)\n      ").single();if(s)throw s;return t},async update(e,t){let{data:s,error:r}=await a.OQ.from("athletes").update(t).eq("id",e).select("\n        *,\n        school:schools(name)\n      ").single();if(r)throw r;return s}},n={async getAll(){let{data:e,error:t}=await a.OQ.from("schools").select("*").order("name");if(t)throw t;return e}},l={async getAll(){let{data:e,error:t}=await a.OQ.from("meets").select("\n        *,\n        races(\n          id,\n          name,\n          category,\n          gender,\n          total_participants,\n          course:courses(name)\n        )\n      ").order("meet_date",{ascending:!1});if(t)throw t;return e},async getById(e){let{data:t,error:s}=await a.OQ.from("meets").select("\n        *,\n        course:courses(*),\n        results(\n          *,\n          athlete:athletes(\n            *,\n            school:schools(name)\n          )\n        )\n      ").eq("id",e).single();if(s)throw s;return t},async create(e){let t={name:e.name,meet_date:e.date,course_id:e.course_id,meet_type:e.meet_type,weather_conditions:e.weather_conditions},{data:s,error:r}=await a.OQ.from("meets").insert(t).select("\n      *,\n      course:courses(name)\n    ").single();if(r)throw r;return s},async update(e,t){let{data:s,error:r}=await a.OQ.from("meets").update(t).eq("id",e).select("\n        *,\n        course:courses(name)\n      ").single();if(r)throw r;return s},async delete(e){let{data:t}=await a.OQ.from("results").select("id").eq("meet_id",e);t&&t.length>0&&await a.OQ.from("results").delete().eq("meet_id",e);let{error:s}=await a.OQ.from("meets").delete().eq("id",e);if(s)throw s;return{deletedResultsCount:(null==t?void 0:t.length)||0}}},i={async getAll(){let{data:e,error:t}=await a.OQ.from("courses").select("\n        id,\n        created_at,\n        name,\n        distance_meters,\n        distance_miles,\n        mile_difficulty,\n        xc_time_rating,\n        rating_confidence,\n        rating_last_updated,\n        total_results_count,\n        meets(count)\n      ").order("name");if(t)throw t;return null==e?void 0:e.map(e=>{var t;return{...e,meets_count:(null===(t=e.meets[0])||void 0===t?void 0:t.count)||0}})},async getById(e){let{data:t,error:s}=await a.OQ.from("courses").select("\n        *,\n        meets(*)\n      ").eq("id",e).single();if(s)throw s;return t},async create(e){let{data:t,error:s}=await a.OQ.from("meets").insert({name:e.name,meet_date:e.date,course_id:e.course_id,meet_type:e.meet_type}).select().single();if(s)throw s;return t},async update(e,t){let{data:s,error:r}=await a.OQ.from("courses").update(t).eq("id",e).select().single();if(r)throw r;return s},async delete(e){let{data:t}=await a.OQ.from("meets").select("id").eq("course_id",e);if(t&&t.length>0)throw Error("Cannot delete course. ".concat(t.length," meets use this course. Delete meets first."));let{error:s}=await a.OQ.from("courses").delete().eq("id",e);if(s)throw s;return!0}},c={async getAll(){let{data:e,error:t}=await a.OQ.from("results").select("\n        *,\n        athlete:athletes(first_name, last_name, graduation_year, school:schools(name)),\n        meet:meets(name, meet_date, course:courses(name))\n      ").order("meet_id",{ascending:!1});if(t)throw t;return e},async getAllWithDetails(){let{data:e,error:t}=await a.OQ.from("results_with_details").select("*").order("meet_date",{ascending:!1});if(t)throw t;return e},async getByMeetId(e){let{data:t,error:s}=await a.OQ.from("results").select("\n        *,\n        athlete:athletes(id, first_name, last_name, graduation_year, school:schools(name))\n      ").eq("meet_id",e).order("place_overall");if(s)throw s;return t},async create(e){let{data:t,error:s}=await a.OQ.from("results").insert(e).select("\n        *,\n        athlete:athletes(first_name, last_name, school:schools(name)),\n        meet:meets(name, meet_date)\n      ").single();if(s)throw s;return t},async update(e,t){let{data:s,error:r}=await a.OQ.from("results").update(t).eq("id",e).select("\n        *,\n        athlete:athletes(first_name, last_name, school:schools(name)),\n        meet:meets(name, meet_date)\n      ").single();if(r)throw r;return s},async delete(e){let{error:t}=await a.OQ.from("results").delete().eq("id",e);if(t)throw t;return!0},async deleteMultiple(e){let{error:t}=await a.OQ.from("results").delete().in("id",e);if(t)throw t;return!0},async searchAllResults(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3,s=a.OQ.from("results_with_details").select("*").order("meet_date",{ascending:!1});e&&(s=s.or("first_name.ilike.%".concat(e,"%,last_name.ilike.%").concat(e,"%,school_name.ilike.%").concat(e,"%,meet_name.ilike.%").concat(e,"%")));let{data:r,error:n}=await s.limit(t);if(n)throw n;return r},async getAllWithPagination(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,s=(e-1)*t,{data:r,error:n}=await a.OQ.from("results_with_details").select("*").order("meet_date",{ascending:!1}).range(s,s+t-1);if(n)throw n;return r},async getTotalCount(){let{count:e,error:t}=await a.OQ.from("results_with_details").select("*",{count:"exact",head:!0});if(t)throw t;return e}}},7823:function(e,t,s){"use strict";s.d(t,{OQ:function(){return r}});var a=s(7440);let r=(0,a.eI)("https://nxhsgmujfjdncrconerr.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im54aHNnbXVqZmpkbmNyY29uZXJyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgzMDE2ODEsImV4cCI6MjA3Mzg3NzY4MX0.ZnKjJfe3Fv4Jv-dY-P0-ZnatFpW6DEI7nRUDtQ9wu4o")}},function(e){e.O(0,[872,971,472,744],function(){return e(e.s=962)}),_N_E=e.O()}]);