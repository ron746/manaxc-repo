(()=>{var e={};e.id=755,e.ids=[755],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},71017:e=>{"use strict";e.exports=require("path")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},51328:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>x,tree:()=>c});var r=s(67096),a=s(16132),n=s(37284),i=s.n(n),l=s(32564),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c=["",{children:["schools",{children:["[id]",{children:["seasons",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,36362)),"/Users/ron/websites/mana-running/src/app/schools/[id]/seasons/page.tsx"]}]},{loading:[()=>Promise.resolve().then(s.bind(s,43384)),"/Users/ron/websites/mana-running/src/app/schools/[id]/seasons/loading.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,79113)),"/Users/ron/websites/mana-running/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/Users/ron/websites/mana-running/src/app/schools/[id]/seasons/page.tsx"],m="/schools/[id]/seasons/page",u={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/schools/[id]/seasons/page",pathname:"/schools/[id]/seasons",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},93323:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,53579,23)),Promise.resolve().then(s.t.bind(s,30619,23)),Promise.resolve().then(s.t.bind(s,81459,23)),Promise.resolve().then(s.t.bind(s,13456,23)),Promise.resolve().then(s.t.bind(s,50847,23)),Promise.resolve().then(s.t.bind(s,57303,23))},83036:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,67490,23)),Promise.resolve().then(s.bind(s,52316))},96739:()=>{},35303:()=>{},52316:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Tabs:()=>J,TabsContent:()=>X,TabsList:()=>K,TabsTrigger:()=>Y});var r=s(53854),a=s(34218),n=s(64667),i=s(65864),l=s(81951),o=s(15001),c=s(17792),d=s(59280),m=s(64928),u=s(76026),x=a.createContext(void 0);function f(e){let t=a.useContext(x);return e||t||"ltr"}var h="rovingFocusGroup.onEntryFocus",p={bubbles:!1,cancelable:!0},g="RovingFocusGroup",[v,b,j]=function(e){let t=e+"CollectionProvider",[s,n]=(0,i.b)(t),[c,d]=s(t,{collectionRef:{current:null},itemMap:new Map}),m=e=>{let{scope:t,children:s}=e,n=a.useRef(null),i=a.useRef(new Map).current;return(0,r.jsx)(c,{scope:t,itemMap:i,collectionRef:n,children:s})};m.displayName=t;let u=e+"CollectionSlot",x=(0,o.Z8)(u),f=a.forwardRef((e,t)=>{let{scope:s,children:a}=e,n=d(u,s),i=(0,l.e)(t,n.collectionRef);return(0,r.jsx)(x,{ref:i,children:a})});f.displayName=u;let h=e+"CollectionItemSlot",p="data-radix-collection-item",g=(0,o.Z8)(h),v=a.forwardRef((e,t)=>{let{scope:s,children:n,...i}=e,o=a.useRef(null),c=(0,l.e)(t,o),m=d(h,s);return a.useEffect(()=>(m.itemMap.set(o,{ref:o,...i}),()=>void m.itemMap.delete(o))),(0,r.jsx)(g,{[p]:"",ref:c,children:n})});return v.displayName=h,[{Provider:m,Slot:f,ItemSlot:v},function(t){let s=d(e+"CollectionConsumer",t),r=a.useCallback(()=>{let e=s.collectionRef.current;if(!e)return[];let t=Array.from(e.querySelectorAll(`[${p}]`)),r=Array.from(s.itemMap.values()),a=r.sort((e,s)=>t.indexOf(e.ref.current)-t.indexOf(s.ref.current));return a},[s.collectionRef,s.itemMap]);return r},n]}(g),[_,y]=(0,i.b)(g,[j]),[N,w]=_(g),S=a.forwardRef((e,t)=>(0,r.jsx)(v.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,r.jsx)(v.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,r.jsx)(M,{...e,ref:t})})}));S.displayName=g;var M=a.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:s,orientation:i,loop:o=!1,dir:c,currentTabStopId:x,defaultCurrentTabStopId:v,onCurrentTabStopIdChange:j,onEntryFocus:_,preventScrollOnEntryFocus:y=!1,...w}=e,S=a.useRef(null),M=(0,l.e)(t,S),C=f(c),[T,R]=(0,u.T)({prop:x,defaultProp:v??null,onChange:j,caller:g}),[I,A]=a.useState(!1),D=(0,m.W)(_),k=b(s),F=a.useRef(!1),[$,E]=a.useState(0);return a.useEffect(()=>{let e=S.current;if(e)return e.addEventListener(h,D),()=>e.removeEventListener(h,D)},[D]),(0,r.jsx)(N,{scope:s,orientation:i,dir:C,loop:o,currentTabStopId:T,onItemFocus:a.useCallback(e=>R(e),[R]),onItemShiftTab:a.useCallback(()=>A(!0),[]),onFocusableItemAdd:a.useCallback(()=>E(e=>e+1),[]),onFocusableItemRemove:a.useCallback(()=>E(e=>e-1),[]),children:(0,r.jsx)(d.WV.div,{tabIndex:I||0===$?-1:0,"data-orientation":i,...w,ref:M,style:{outline:"none",...e.style},onMouseDown:(0,n.Mj)(e.onMouseDown,()=>{F.current=!0}),onFocus:(0,n.Mj)(e.onFocus,e=>{let t=!F.current;if(e.target===e.currentTarget&&t&&!I){let t=new CustomEvent(h,p);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=k().filter(e=>e.focusable),t=e.find(e=>e.active),s=e.find(e=>e.id===T),r=[t,s,...e].filter(Boolean),a=r.map(e=>e.ref.current);P(a,y)}}F.current=!1}),onBlur:(0,n.Mj)(e.onBlur,()=>A(!1))})})}),C="RovingFocusGroupItem",T=a.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:s,focusable:i=!0,active:l=!1,tabStopId:o,children:m,...u}=e,x=(0,c.M)(),f=o||x,h=w(C,s),p=h.currentTabStopId===f,g=b(s),{onFocusableItemAdd:j,onFocusableItemRemove:_,currentTabStopId:y}=h;return a.useEffect(()=>{if(i)return j(),()=>_()},[i,j,_]),(0,r.jsx)(v.ItemSlot,{scope:s,id:f,focusable:i,active:l,children:(0,r.jsx)(d.WV.span,{tabIndex:p?0:-1,"data-orientation":h.orientation,...u,ref:t,onMouseDown:(0,n.Mj)(e.onMouseDown,e=>{i?h.onItemFocus(f):e.preventDefault()}),onFocus:(0,n.Mj)(e.onFocus,()=>h.onItemFocus(f)),onKeyDown:(0,n.Mj)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey){h.onItemShiftTab();return}if(e.target!==e.currentTarget)return;let t=function(e,t,s){var r;let a=(r=e.key,"rtl"!==s?r:"ArrowLeft"===r?"ArrowRight":"ArrowRight"===r?"ArrowLeft":r);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(a))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(a)))return R[a]}(e,h.orientation,h.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let s=g().filter(e=>e.focusable),r=s.map(e=>e.ref.current);if("last"===t)r.reverse();else if("prev"===t||"next"===t){"prev"===t&&r.reverse();let s=r.indexOf(e.currentTarget);r=h.loop?function(e,t){return e.map((s,r)=>e[(t+r)%e.length])}(r,s+1):r.slice(s+1)}setTimeout(()=>P(r))}}),children:"function"==typeof m?m({isCurrentTabStop:p,hasTabStop:null!=y}):m})})});T.displayName=C;var R={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function P(e,t=!1){let s=document.activeElement;for(let r of e)if(r===s||(r.focus({preventScroll:t}),document.activeElement!==s))return}var I=s(55572),A="Tabs",[D,k]=(0,i.b)(A,[y]),F=y(),[$,E]=D(A),O=a.forwardRef((e,t)=>{let{__scopeTabs:s,value:a,onValueChange:n,defaultValue:i,orientation:l="horizontal",dir:o,activationMode:m="automatic",...x}=e,h=f(o),[p,g]=(0,u.T)({prop:a,onChange:n,defaultProp:i??"",caller:A});return(0,r.jsx)($,{scope:s,baseId:(0,c.M)(),value:p,onValueChange:g,orientation:l,dir:h,activationMode:m,children:(0,r.jsx)(d.WV.div,{dir:h,"data-orientation":l,...x,ref:t})})});O.displayName=A;var q="TabsList",G=a.forwardRef((e,t)=>{let{__scopeTabs:s,loop:a=!0,...n}=e,i=E(q,s),l=F(s);return(0,r.jsx)(S,{asChild:!0,...l,orientation:i.orientation,dir:i.dir,loop:a,children:(0,r.jsx)(d.WV.div,{role:"tablist","aria-orientation":i.orientation,...n,ref:t})})});G.displayName=q;var V="TabsTrigger",B=a.forwardRef((e,t)=>{let{__scopeTabs:s,value:a,disabled:i=!1,...l}=e,o=E(V,s),c=F(s),m=z(o.baseId,a),u=Z(o.baseId,a),x=a===o.value;return(0,r.jsx)(T,{asChild:!0,...c,focusable:!i,active:x,children:(0,r.jsx)(d.WV.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":u,"data-state":x?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:m,...l,ref:t,onMouseDown:(0,n.Mj)(e.onMouseDown,e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():o.onValueChange(a)}),onKeyDown:(0,n.Mj)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&o.onValueChange(a)}),onFocus:(0,n.Mj)(e.onFocus,()=>{let e="manual"!==o.activationMode;x||i||!e||o.onValueChange(a)})})})});B.displayName=V;var L="TabsContent",U=a.forwardRef((e,t)=>{let{__scopeTabs:s,value:n,forceMount:i,children:l,...o}=e,c=E(L,s),m=z(c.baseId,n),u=Z(c.baseId,n),x=n===c.value,f=a.useRef(x);return a.useEffect(()=>{let e=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,r.jsx)(I.z,{present:i||x,children:({present:s})=>(0,r.jsx)(d.WV.div,{"data-state":x?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":m,hidden:!s,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:s&&l})})});function z(e,t){return`${e}-trigger-${t}`}function Z(e,t){return`${e}-content-${t}`}U.displayName=L;var W=s(68504);let J=O,K=a.forwardRef(({className:e,...t},s)=>r.jsx(G,{ref:s,className:(0,W.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",e),...t}));K.displayName=G.displayName;let Y=a.forwardRef(({className:e,...t},s)=>r.jsx(B,{ref:s,className:(0,W.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",e),...t}));Y.displayName=B.displayName;let X=a.forwardRef(({className:e,...t},s)=>r.jsx(U,{ref:s,className:(0,W.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));X.displayName=U.displayName},68504:(e,t,s)=>{"use strict";s.d(t,{L_:()=>i,cn:()=>n,mr:()=>l});var r=s(29395),a=s(1088);function n(...e){return(0,a.m6)((0,r.W)(e))}function i(e){let t=new Date(e);if(isNaN(t.getTime()))return"Invalid Date";let s=["Sun.","Mon.","Tue.","Wed.","Thu.","Fri.","Sat."][t.getDay()],r=t.getMonth()+1,a=t.getDate(),n=t.getFullYear();return`${s} ${r}/${a}/${n}`}function l(e){if(!e||e<=0)return"--:--";let t=Math.floor(e/100);return`${Math.floor(t/60)}:${(t%60).toString().padStart(2,"0")}.${Math.round(e%100).toString().padStart(2,"0")}`}},79113:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l,metadata:()=>i});var r=s(4656),a=s(37910),n=s.n(a);s(5023);let i={title:"Mana Running - Cross Country Statistics",description:"Comprehensive Cross Country Statistics & Performance Analytics"};function l({children:e}){return r.jsx("html",{lang:"en",children:(0,r.jsxs)("body",{className:`${n().variable} antialiased font-inter`,children:[r.jsx("header",{className:"bg-black text-white p-6",children:r.jsx("div",{className:"container mx-auto",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-4xl font-bold mb-2",children:r.jsx("a",{href:"/",className:"hover:text-gray-300",children:"Mana Running"})}),r.jsx("p",{className:"text-gray-200",children:"Comprehensive Cross Country Statistics & Performance Analytics"})]}),(0,r.jsxs)("nav",{className:"flex space-x-4",children:[r.jsx("a",{href:"/",className:"px-4 py-2 bg-gray-700 rounded hover:bg-gray-600 transition-colors",children:"Home"}),r.jsx("a",{href:"/meets",className:"px-4 py-2 bg-blue-600 rounded hover:bg-blue-500 transition-colors",children:"Meets"}),r.jsx("a",{href:"/courses",className:"px-4 py-2 bg-green-600 rounded hover:bg-green-500 transition-colors",children:"Courses"}),r.jsx("a",{href:"/schools",className:"px-4 py-2 bg-red-600 rounded hover:bg-red-500 transition-colors",children:"Schools"}),r.jsx("a",{href:"/athletes",className:"px-4 py-2 bg-orange-600 rounded hover:bg-orange-500 transition-colors",children:"Athletes"}),r.jsx("a",{href:"/admin",className:"px-4 py-2 bg-yellow-600 rounded hover:bg-yellow-500 transition-colors",children:"Admin"})]})]})})}),e]})})}},43384:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(4656),a=s(29718),n=s(92974);function i({className:e,...t}){return r.jsx("div",{className:(0,n.cn)("animate-pulse rounded-md bg-primary/10",e),...t})}function l(){return(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[r.jsx(i,{className:"h-4 w-32 mb-4"}),r.jsx(i,{className:"h-9 w-80 mb-2"}),r.jsx(i,{className:"h-5 w-96"})]}),r.jsx("div",{className:"space-y-6",children:[1,2,3].map(e=>(0,r.jsxs)(a.Zb,{className:"mb-6",children:[r.jsx(a.Ol,{children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx(i,{className:"h-7 w-32"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx(i,{className:"h-6 w-16"}),r.jsx(i,{className:"h-6 w-16"})]})]})}),(0,r.jsxs)(a.aY,{children:[(0,r.jsxs)("div",{className:"flex gap-4 mb-6",children:[r.jsx(i,{className:"h-10 w-32"}),r.jsx(i,{className:"h-10 w-32"})]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 p-4 bg-muted/50 rounded-lg mb-6",children:[1,2,3,4].map(e=>(0,r.jsxs)("div",{className:"text-center",children:[r.jsx(i,{className:"h-8 w-12 mx-auto mb-2"}),r.jsx(i,{className:"h-4 w-16 mx-auto"})]},e))}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(i,{className:"h-6 w-40 mb-3"}),[1,2,3,4,5].map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx(i,{className:"w-8 h-8 rounded-full"}),(0,r.jsxs)("div",{children:[r.jsx(i,{className:"h-5 w-32 mb-1"}),r.jsx(i,{className:"h-4 w-24"})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[r.jsx(i,{className:"h-6 w-16 mb-1"}),r.jsx(i,{className:"h-4 w-24 mb-1"}),r.jsx(i,{className:"h-3 w-20"})]})]},e))]})]})]},e))})]})}},36362:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>O});var r,a,n=s(4656),i=s(41412),l=s(51762);let o={async getAll(){let{data:e,error:t}=await l.OQ.from("schools").select("*").order("name");if(t)throw t;return e}};var c=s(29718);s(3542);var d=s(35143);let m=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,u=d.W;var x=s(92974);let f=(r="inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",a={variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}},e=>{var t;if((null==a?void 0:a.variants)==null)return u(r,null==e?void 0:e.class,null==e?void 0:e.className);let{variants:s,defaultVariants:n}=a,i=Object.keys(s).map(t=>{let r=null==e?void 0:e[t],a=null==n?void 0:n[t];if(null===r)return null;let i=m(r)||m(a);return s[t][i]}),l=e&&Object.entries(e).reduce((e,t)=>{let[s,r]=t;return void 0===r||(e[s]=r),e},{}),o=null==a?void 0:null===(t=a.compoundVariants)||void 0===t?void 0:t.reduce((e,t)=>{let{class:s,className:r,...a}=t;return Object.entries(a).every(e=>{let[t,s]=e;return Array.isArray(s)?s.includes({...n,...l}[t]):({...n,...l})[t]===s})?[...e,s,r]:e},[]);return u(r,i,o,null==e?void 0:e.class,null==e?void 0:e.className)});function h({className:e,variant:t,...s}){return n.jsx("div",{className:(0,x.cn)(f({variant:t}),e),...s})}var p=s(95153);let g=(0,p.createProxy)(String.raw`/Users/ron/websites/mana-running/src/components/ui/tabs.tsx`),{__esModule:v,$$typeof:b}=g;g.default;let j=(0,p.createProxy)(String.raw`/Users/ron/websites/mana-running/src/components/ui/tabs.tsx#Tabs`),_=(0,p.createProxy)(String.raw`/Users/ron/websites/mana-running/src/components/ui/tabs.tsx#TabsList`),y=(0,p.createProxy)(String.raw`/Users/ron/websites/mana-running/src/components/ui/tabs.tsx#TabsTrigger`),N=(0,p.createProxy)(String.raw`/Users/ron/websites/mana-running/src/components/ui/tabs.tsx#TabsContent`);var w=s(24353),S=s.n(w);async function M(e){let t=await o.getAll(),s=t?.find(t=>t.id===e);return s||null}async function C(e){console.log("Looking for school_id:",e);let{data:t,error:s}=await l.OQ.from("results_with_details").select(`
      race_gender,
      graduation_year,
      athlete_id,
      athlete_name,
      time_seconds,
      xc_time_rating,
      course_name,
      meet_name,
      meet_date,
      race_category
    `).eq("school_id",e).order("meet_date",{ascending:!1});if(s||!t)return console.error("Error fetching seasons data:",s),[];console.log("Found results:",t.length);let r=t.map(e=>{let t=new Date(e.meet_date),s=t.getFullYear(),r=t.getMonth()+1,a=r>=7?s+1:s,n=12-(e.graduation_year-a);return{...e,academic_year:a,gender:"M"===e.race_gender?"Boys":"Girls",grade:n,race_division:e.race_category||"Varsity"}});console.log("Results with academic years:",r.slice(0,3));let a=r.reduce((e,t)=>{let s=t.academic_year;return e[s]||(e[s]=[]),e[s].push(t),e},{});console.log("Season groups:",Object.keys(a));let n=[];for(let[e,t]of Object.entries(a)){let s=parseInt(e),r=`${s}-${(s+1).toString().slice(-2)}`,a=t.filter(e=>"Boys"===e.gender),i=t.filter(e=>"Girls"===e.gender),l=T(a),o=T(i),c=I(a,10),d=I(i,10),m=function(e){let t=e.reduce((e,t)=>{let s=`${t.meet_name}-${t.meet_date}`;return e[s]||(e[s]=[]),e[s].push(t),e},{}),s=[];for(let[e,r]of Object.entries(t)){let e=r.filter(e=>"Boys"===e.gender),t=r.filter(e=>"Girls"===e.gender),a=P(e),n=P(t);s.push({meet_name:r[0].meet_name,meet_date:r[0].meet_date,boys_team:a,girls_team:n})}return s.sort((e,t)=>new Date(t.meet_date).getTime()-new Date(e.meet_date).getTime())}(t),u=function(e){let t=e.filter(e=>"Boys"===e.gender),s=e.filter(e=>"Girls"===e.gender),r=R(t),a=R(s),n=P(r),i=P(a);return{boys:n,girls:i}}(t),x=new Set(t.map(e=>e.meet_name)).size,f=new Set(t.map(e=>`${e.meet_name}-${e.race_category}`)).size;n.push({academic_year:s,season_name:r,boys_stats:l,girls_stats:o,top_boys:c,top_girls:d,meets_count:x,races_count:f,team_performances:m,season_best_team:u})}return n}function T(e){if(0===e.length)return{total_athletes:0,avg_xc_time:null,best_xc_time:null,meets_participated:0,varsity_avg:null,jv_avg:null};let t=e.map(e=>e.time_seconds*e.xc_time_rating),s=e.filter(e=>e.race_division?.toLowerCase().includes("varsity")),r=e.filter(e=>e.race_division?.toLowerCase().includes("jv")||e.race_division?.toLowerCase().includes("junior")),a=s.map(e=>e.time_seconds*e.xc_time_rating),n=r.map(e=>e.time_seconds*e.xc_time_rating);return{total_athletes:new Set(e.map(e=>e.athlete_id)).size,avg_xc_time:t.reduce((e,t)=>e+t,0)/t.length,best_xc_time:Math.min(...t),meets_participated:new Set(e.map(e=>e.meet_name)).size,varsity_avg:a.length>0?a.reduce((e,t)=>e+t,0)/a.length:null,jv_avg:n.length>0?n.reduce((e,t)=>e+t,0)/n.length:null}}function R(e){let t=e.reduce((e,t)=>{let s=t.athlete_id;return e[s]||(e[s]=[]),e[s].push(t),e},{}),s=[];for(let[e,r]of Object.entries(t)){let e=r.reduce((e,t)=>{let s=t.time_seconds*t.xc_time_rating,r=e.time_seconds*e.xc_time_rating;return s<r?t:e});s.push(e)}return s}function P(e){if(0===e.length)return null;let t=e.map(e=>({...e,xc_time:e.time_seconds*e.xc_time_rating})).sort((e,t)=>e.xc_time-t.xc_time),s=t.slice(0,5);if(0===s.length)return null;let r=s.reduce((e,t)=>e+t.xc_time,0);return{total_xc_time:r,athletes:s.map((e,t)=>({name:e.athlete_name,xc_time:e.xc_time,actual_time:e.time_seconds,place:t+1}))}}function I(e,t){let s=e.reduce((e,t)=>{let s=t.athlete_id;return e[s]||(e[s]=[]),e[s].push(t),e},{}),r=[];for(let[e,t]of Object.entries(s)){let s=t.map(e=>({xc_time:e.time_seconds*e.xc_time_rating,actual_time:e.time_seconds,course:e.course_name,meet:e.meet_name,date:e.meet_date})),a=s.reduce((e,t)=>t.xc_time<e.xc_time?t:e),n=s.reduce((e,t)=>e+t.xc_time,0)/s.length;r.push({athlete_id:parseInt(e),athlete_name:t[0].athlete_name,grade:t[0].grade,best_xc_time:a.xc_time,best_actual_time:a.actual_time,best_course:a.course,best_meet:a.meet,best_date:a.date,total_races:t.length,avg_xc_time:n})}return r.sort((e,t)=>e.best_xc_time-t.best_xc_time).slice(0,t)}function A(e){let t=e/100;return`${Math.floor(t/60)}:${Math.floor(t%60).toString().padStart(2,"0")}.${Math.floor(t%1*100).toString().padStart(2,"0")}`}function D(e){return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}function k({season:e}){return(0,n.jsxs)(c.Zb,{className:"mb-6",children:[n.jsx(c.Ol,{children:(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsxs)(c.ll,{className:"text-xl",children:[e.season_name," Season"]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsxs)(h,{variant:"outline",children:[e.meets_count," meets"]}),(0,n.jsxs)(h,{variant:"outline",children:[e.races_count," races"]})]})]})}),n.jsx(c.aY,{children:(0,n.jsxs)(j,{defaultValue:"boys",className:"w-full",children:[(0,n.jsxs)(_,{className:"grid w-full grid-cols-3",children:[(0,n.jsxs)(y,{value:"boys",children:["Boys (",e.boys_stats.total_athletes," athletes)"]}),(0,n.jsxs)(y,{value:"girls",children:["Girls (",e.girls_stats.total_athletes," athletes)"]}),n.jsx(y,{value:"team-times",children:"Team Times"})]}),(0,n.jsxs)(N,{value:"boys",className:"space-y-4",children:[n.jsx(F,{stats:e.boys_stats}),n.jsx(E,{performers:e.top_boys,gender:"Boys"})]}),(0,n.jsxs)(N,{value:"girls",className:"space-y-4",children:[n.jsx(F,{stats:e.girls_stats}),n.jsx(E,{performers:e.top_girls,gender:"Girls"})]}),n.jsx(N,{value:"team-times",className:"space-y-4",children:n.jsx($,{seasonBest:e.season_best_team,performances:e.team_performances})})]})})]})}function F({stats:e}){return 0===e.total_athletes?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No data available for this season"}):(0,n.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 p-4 bg-muted/50 rounded-lg",children:[(0,n.jsxs)("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold",children:e.total_athletes}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Athletes"})]}),(0,n.jsxs)("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold",children:e.best_xc_time?A(e.best_xc_time):"N/A"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Best XC Time"})]}),(0,n.jsxs)("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold",children:e.varsity_avg?A(e.varsity_avg):"N/A"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Varsity Avg"})]}),(0,n.jsxs)("div",{className:"text-center",children:[n.jsx("div",{className:"text-2xl font-bold",children:e.meets_participated}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Meets"})]})]})}function $({seasonBest:e,performances:t}){return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{children:[n.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Team Time with SBs (Season Bests)"}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[n.jsx("h5",{className:"font-semibold text-blue-800 mb-3",children:"Boys Team"}),e.boys?(0,n.jsxs)("div",{children:[n.jsx("div",{className:"text-2xl font-bold text-blue-900 mb-3",children:A(e.boys.total_xc_time)}),n.jsx("div",{className:"space-y-2",children:e.boys.athletes.map((e,t)=>(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsxs)("span",{children:[e.place,". ",e.name]}),n.jsx("span",{className:"font-mono",children:A(e.xc_time)})]},t))})]}):n.jsx("div",{className:"text-blue-600",children:"No data available"})]}),(0,n.jsxs)("div",{className:"bg-pink-50 rounded-lg p-4",children:[n.jsx("h5",{className:"font-semibold text-pink-800 mb-3",children:"Girls Team"}),e.girls?(0,n.jsxs)("div",{children:[n.jsx("div",{className:"text-2xl font-bold text-pink-900 mb-3",children:A(e.girls.total_xc_time)}),n.jsx("div",{className:"space-y-2",children:e.girls.athletes.map((e,t)=>(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsxs)("span",{children:[e.place,". ",e.name]}),n.jsx("span",{className:"font-mono",children:A(e.xc_time)})]},t))})]}):n.jsx("div",{className:"text-pink-600",children:"No data available"})]})]})]}),(0,n.jsxs)("div",{children:[n.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Season Performances"}),0===t.length?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No team performances recorded yet."}):n.jsx("div",{className:"space-y-4",children:t.map((e,t)=>(0,n.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h5",{className:"font-semibold",children:e.meet_name}),n.jsx("span",{className:"text-sm text-muted-foreground",children:D(e.meet_date)})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3",children:[n.jsx("h6",{className:"font-medium text-blue-800 mb-2",children:"Boys"}),e.boys_team?(0,n.jsxs)("div",{children:[n.jsx("div",{className:"text-xl font-bold text-blue-900 mb-2",children:A(e.boys_team.total_xc_time)}),n.jsx("div",{className:"space-y-1",children:e.boys_team.athletes.map((e,t)=>(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsxs)("span",{children:[e.place,". ",e.name]}),n.jsx("span",{className:"font-mono",children:A(e.xc_time)})]},t))})]}):n.jsx("div",{className:"text-blue-600 text-sm",children:"No team data"})]}),(0,n.jsxs)("div",{className:"bg-pink-50 rounded-lg p-3",children:[n.jsx("h6",{className:"font-medium text-pink-800 mb-2",children:"Girls"}),e.girls_team?(0,n.jsxs)("div",{children:[n.jsx("div",{className:"text-xl font-bold text-pink-900 mb-2",children:A(e.girls_team.total_xc_time)}),n.jsx("div",{className:"space-y-1",children:e.girls_team.athletes.map((e,t)=>(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsxs)("span",{children:[e.place,". ",e.name]}),n.jsx("span",{className:"font-mono",children:A(e.xc_time)})]},t))})]}):n.jsx("div",{className:"text-pink-600 text-sm",children:"No team data"})]})]})]},t))})]})]})}function E({performers:e,gender:t}){return 0===e.length?null:(0,n.jsxs)("div",{children:[(0,n.jsxs)("h4",{className:"text-lg font-semibold mb-3",children:["Top ",t," Performers"]}),n.jsx("div",{className:"space-y-2",children:e.map((e,t)=>(0,n.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg hover:bg-muted/50 transition-colors",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center text-sm font-medium",children:t+1}),(0,n.jsxs)("div",{children:[n.jsx(S(),{href:`/athletes/${e.athlete_id}`,className:"font-medium hover:text-primary transition-colors",children:e.athlete_name}),(0,n.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Grade ",e.grade," • ",e.total_races," races"]})]})]}),(0,n.jsxs)("div",{className:"text-right",children:[n.jsx("div",{className:"font-mono text-lg",children:A(e.best_xc_time)}),(0,n.jsxs)("div",{className:"text-sm text-muted-foreground",children:[A(e.best_actual_time)," at ",e.best_course]}),n.jsx("div",{className:"text-xs text-muted-foreground",children:D(e.best_date)})]})]},e.athlete_id))})]})}async function O({params:e}){let t=await M(e.id);t||(0,i.notFound)();let s=await C(e.id);return(0,n.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,n.jsxs)("div",{className:"mb-8",children:[n.jsx("div",{className:"flex items-center gap-4 mb-4",children:(0,n.jsxs)(S(),{href:`/schools/${t.id}`,className:"text-muted-foreground hover:text-primary transition-colors",children:["← Back to ",t.name]})}),(0,n.jsxs)("h1",{className:"text-3xl font-bold",children:[t.name," - Season History"]}),n.jsx("p",{className:"text-muted-foreground mt-2",children:"Complete season-by-season performance analysis"})]}),0===s.length?n.jsx(c.Zb,{children:n.jsx(c.aY,{className:"py-12 text-center",children:n.jsx("p",{className:"text-muted-foreground text-lg",children:"No season data available for this school yet."})})}):n.jsx("div",{className:"space-y-6",children:s.map(e=>n.jsx(k,{season:e},e.academic_year))})]})}},29718:(e,t,s)=>{"use strict";s.d(t,{Ol:()=>l,Zb:()=>i,aY:()=>d,ll:()=>o});var r=s(4656),a=s(3542),n=s(92974);let i=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...t}));i.displayName="Card";let l=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...t}));l.displayName="CardHeader";let o=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,n.cn)("font-semibold leading-none tracking-tight",e),...t}));o.displayName="CardTitle";let c=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",e),...t}));c.displayName="CardDescription";let d=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,n.cn)("p-6 pt-0",e),...t}));d.displayName="CardContent";let m=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",e),...t}));m.displayName="CardFooter"},51762:(e,t,s)=>{"use strict";s.d(t,{OQ:()=>a});var r=s(54556);let a=(0,r.eI)("https://nxhsgmujfjdncrconerr.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im54aHNnbXVqZmpkbmNyY29uZXJyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgzMDE2ODEsImV4cCI6MjA3Mzg3NzY4MX0.ZnKjJfe3Fv4Jv-dY-P0-ZnatFpW6DEI7nRUDtQ9wu4o")},92974:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n,mr:()=>l,wJ:()=>i});var r=s(35143),a=s(15011);function n(...e){return(0,a.m6)((0,r.W)(e))}function i(e){let t=new Date(e+"T00:00:00");return t.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}function l(e){if(!e||e<=0)return"--:--";let t=Math.floor(e/100);return`${Math.floor(t/60)}:${(t%60).toString().padStart(2,"0")}.${Math.round(e%100).toString().padStart(2,"0")}`}},73881:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(31323);let a=e=>{let t=(0,r.fillMetadataSegment)(".",e.params,"favicon.ico");return[{type:"image/x-icon",sizes:"16x16",url:t+""}]}},5023:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[494,50,323,78,490,718,952],()=>s(51328));module.exports=r})();