(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[65],{9664:function(e,t,s){Promise.resolve().then(s.bind(s,2201))},2201:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return n}});var a=s(7437),r=s(2265),l=s(6702);function n(){let[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)(!0),[i,c]=(0,r.useState)(null),[o,d]=(0,r.useState)(""),[m,u]=(0,r.useState)(""),[h,x]=(0,r.useState)(!1),[f,g]=(0,r.useState)(1),[y,b]=(0,r.useState)("name"),[j,p]=(0,r.useState)("asc");(0,r.useEffect)(()=>{w()},[]);let w=async()=>{try{n(!0),c(null);let e=await l.kd.getAll();e&&t(e)}catch(e){console.error("Error loading courses:",e),c("Failed to load courses")}finally{n(!1)}},_=e=>{y===e?p("asc"===j?"desc":"asc"):(b(e),p("asc")),g(1)},v=e.filter(e=>{let t=!o||e.name.toLowerCase().includes(o.toLowerCase()),s=!m||.1>Math.abs(e.distance_miles-parseFloat(m)),a=!h||e.total_results_count&&e.total_results_count>0;return t&&s&&a}).sort((e,t)=>{let s,a;switch(y){case"name":s=e.name.toLowerCase(),a=t.name.toLowerCase();break;case"distance_miles":s=e.distance_miles||0,a=t.distance_miles||0;break;case"mile_difficulty":s=e.mile_difficulty||0,a=t.mile_difficulty||0;break;case"meets_count":s=e.meets_count||0,a=t.meets_count||0;break;case"total_results_count":s=e.total_results_count||0,a=t.total_results_count||0;break;default:return 0}return s<a?"asc"===j?-1:1:s>a?"asc"===j?1:-1:0}),N=Math.ceil(v.length/15),k=(f-1)*15,C=k+15,O=v.slice(k,C),Q=[...new Set(e.map(e=>e.distance_miles).filter(Boolean))].sort((e,t)=>e-t),I=e=>{let{field:t,children:s,className:r=""}=e,l=y===t,n="asc"===j;return(0,a.jsx)("th",{className:"py-3 px-4 font-bold text-black cursor-pointer hover:bg-gray-100 transition-colors ".concat(r),onClick:()=>_(t),children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[s,(0,a.jsxs)("div",{className:"flex flex-col ml-1",children:[(0,a.jsx)("svg",{className:"w-3 h-3 ".concat(l&&n?"text-green-600":"text-gray-400"),fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z",clipRule:"evenodd"})}),(0,a.jsx)("svg",{className:"w-3 h-3 -mt-1 ".concat(l&&!n?"text-green-600":"text-gray-400"),fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]})]})})},S=e=>e>=1.2?"bg-red-100 text-red-800":e>=1.15?"bg-orange-100 text-orange-800":e>=1.05?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800",M=e=>e>=1.2?"Very Hard":e>=1.15?"Hard":e>=1.05?"Moderate":"Fast";return s?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-xl font-semibold mb-2",children:"Loading Courses..."}),(0,a.jsx)("div",{className:"text-gray-600",children:"Getting course information..."})]})}):i?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center max-w-md mx-auto",children:[(0,a.jsx)("div",{className:"text-xl font-semibold mb-2 text-red-600",children:"Error"}),(0,a.jsx)("div",{className:"text-gray-600 mb-4",children:i}),(0,a.jsx)("button",{onClick:w,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Try Again"})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsxs)("div",{className:"container mx-auto px-6 py-8",children:[(0,a.jsxs)("div",{className:"mb-8 flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-black mb-2",children:"Cross Country Courses"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Browse all cross country courses with meet history and performance data"})]}),(0,a.jsx)("a",{href:"/courses/import-courses",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition-colors text-sm font-medium",children:"Import Courses"})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow mb-6 p-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Courses"}),(0,a.jsx)("input",{type:"text",value:o,onChange:e=>{d(e.target.value),g(1)},placeholder:"Search by course name...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-green-500 focus:border-green-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Distance"}),(0,a.jsxs)("select",{value:m,onChange:e=>{u(e.target.value),g(1)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-green-500 focus:border-green-500",children:[(0,a.jsx)("option",{value:"",children:"All Distances"}),Q.map(e=>(0,a.jsxs)("option",{value:e.toString(),children:[e.toFixed(2)," miles"]},e))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Results Filter"}),(0,a.jsxs)("div",{className:"flex items-center h-10",children:[(0,a.jsx)("input",{type:"checkbox",id:"show-with-results",checked:h,onChange:e=>{x(e.target.checked),g(1)},className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"}),(0,a.jsx)("label",{htmlFor:"show-with-results",className:"ml-2 text-sm text-gray-700",children:"Has results only"})]})]}),(0,a.jsx)("div",{className:"flex items-end",children:(0,a.jsx)("button",{onClick:()=>{d(""),u(""),x(!1),g(1)},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Clear Filters"})})]})}),(0,a.jsxs)("div",{className:"mb-4 text-sm text-gray-600",children:["Showing ",k+1,"-",Math.min(C,v.length)," of ",v.length," courses","name"!==y&&(0,a.jsxs)("span",{className:"ml-2 text-green-600",children:["(sorted by ",y.replace("_"," ")," ","asc"===j?"↑":"↓",")"]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"p-6 border-b",children:(0,a.jsx)("h2",{className:"text-2xl font-bold text-black",children:"Course Directory"})}),0===v.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-gray-500 mb-4",children:"No courses found matching your criteria."}),(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"Try adjusting your search or filters."})]}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b text-left bg-gray-50",children:[(0,a.jsx)(I,{field:"name",children:"Course Name"}),(0,a.jsx)(I,{field:"distance_miles",children:"Distance"}),(0,a.jsx)(I,{field:"mile_difficulty",children:"Difficulty"}),(0,a.jsx)(I,{field:"meets_count",children:"Meets"}),(0,a.jsx)(I,{field:"total_results_count",children:"Total Results"}),(0,a.jsx)("th",{className:"py-3 px-4 font-bold text-black",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:O.map(e=>{var t;return(0,a.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"py-4 px-4",children:(0,a.jsx)("a",{href:"/courses/".concat(e.id),className:"text-lg font-bold text-green-600 hover:text-green-800 transition-colors",children:e.name})}),(0,a.jsx)("td",{className:"py-4 px-4",children:(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsxs)("div",{className:"font-medium text-black",children:[null===(t=e.distance_miles)||void 0===t?void 0:t.toFixed(2)," miles"]}),(0,a.jsxs)("div",{className:"text-gray-500",children:[e.distance_meters,"m"]})]})}),(0,a.jsx)("td",{className:"py-4 px-4",children:null!==e.mile_difficulty?(0,a.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,a.jsx)("span",{className:"px-2 py-1 rounded text-sm font-semibold ".concat(S(e.mile_difficulty)),children:M(e.mile_difficulty)}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[e.mile_difficulty.toFixed(3),"x vs track mile"]}),e.xc_time_rating&&(0,a.jsxs)("span",{className:"text-xs text-blue-600",children:["XC Rating: ",e.xc_time_rating.toFixed(3)]})]}):(0,a.jsx)("span",{className:"px-2 py-1 rounded text-sm bg-gray-100 text-gray-800",children:"Not Rated"})}),(0,a.jsx)("td",{className:"py-4 px-4 text-center",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded text-sm font-semibold bg-blue-100 text-blue-800",children:e.meets_count||0})}),(0,a.jsx)("td",{className:"py-4 px-4 text-center",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded text-sm font-semibold bg-green-100 text-green-800",children:e.total_results_count||0})}),(0,a.jsx)("td",{className:"py-4 px-4",children:(0,a.jsx)("div",{className:"flex space-x-2",children:(0,a.jsx)("a",{href:"/courses/".concat(e.id),className:"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700 transition-colors",children:"View Details"})})})]},e.id)})})]})})]}),N>1&&(0,a.jsxs)("div",{className:"flex items-center justify-between mt-8 pt-4 border-t",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Page ",f," of ",N]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>g(Math.max(1,f-1)),disabled:1===f,className:"px-3 py-2 border rounded text-black disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),(0,a.jsx)("button",{onClick:()=>g(Math.min(N,f+1)),disabled:f===N,className:"px-3 py-2 border rounded text-black disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]})]}),(0,a.jsxs)("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"font-semibold text-blue-900 mb-3",children:"Course Rating System"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-blue-800",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium mb-2",children:"Difficulty Rating (vs Track Mile):"}),(0,a.jsxs)("ul",{className:"space-y-1",children:[(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"1.00:"})," Same effort as 1-mile track"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"1.10:"})," 10% harder than track mile"]}),(0,a.jsxs)("li",{children:["• ",(0,a.jsx)("strong",{children:"1.20:"})," 20% harder than track mile"]}),(0,a.jsx)("li",{children:"• Higher rating = more challenging course"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium mb-2",children:"XC Time Conversion:"}),(0,a.jsxs)("ul",{className:"space-y-1",children:[(0,a.jsx)("li",{children:"• XC Rating converts times to Crystal Springs equivalent"}),(0,a.jsx)("li",{children:"• Allows fair comparison across different courses"}),(0,a.jsx)("li",{children:"• Used for team selection and performance analysis"}),(0,a.jsx)("li",{children:"• Based on distance and terrain difficulty"})]})]})]})]})]})})}},6702:function(e,t,s){"use strict";s.d(t,{Ab:function(){return c},Bj:function(){return n},jZ:function(){return r},kI:function(){return l},kd:function(){return i}});var a=s(7823);let r={async getAll(){let{data:e,error:t}=await a.OQ.from("athletes").select("\n        *,\n        school:schools(id, name)\n      ").order("last_name");if(t)throw t;return e},async getById(e){let{data:t,error:s}=await a.OQ.from("athletes").select("\n        *,\n        school:schools(*)\n      ").eq("id",e).single();if(s)throw s;return t},async getTotalCount(){let{count:e,error:t}=await a.OQ.from("athletes").select("*",{count:"exact",head:!0});if(t)throw t;return e},async create(e){let{data:t,error:s}=await a.OQ.from("athletes").insert(e).select("\n        *,\n        school:schools(name)\n      ").single();if(s)throw s;return t},async update(e,t){let{data:s,error:r}=await a.OQ.from("athletes").update(t).eq("id",e).select("\n        *,\n        school:schools(name)\n      ").single();if(r)throw r;return s}},l={async getAll(){let{data:e,error:t}=await a.OQ.from("schools").select("*").order("name");if(t)throw t;return e}},n={async getAll(){let{data:e,error:t}=await a.OQ.from("meets").select("\n        *,\n        races(\n          id,\n          name,\n          category,\n          gender,\n          total_participants,\n          course:courses(name)\n        )\n      ").order("meet_date",{ascending:!1});if(t)throw t;return e},async getById(e){let{data:t,error:s}=await a.OQ.from("meets").select("\n        *,\n        course:courses(*),\n        results(\n          *,\n          athlete:athletes(\n            *,\n            school:schools(name)\n          )\n        )\n      ").eq("id",e).single();if(s)throw s;return t},async create(e){let t={name:e.name,meet_date:e.date,course_id:e.course_id,meet_type:e.meet_type,weather_conditions:e.weather_conditions},{data:s,error:r}=await a.OQ.from("meets").insert(t).select("\n      *,\n      course:courses(name)\n    ").single();if(r)throw r;return s},async update(e,t){let{data:s,error:r}=await a.OQ.from("meets").update(t).eq("id",e).select("\n        *,\n        course:courses(name)\n      ").single();if(r)throw r;return s},async delete(e){let{data:t}=await a.OQ.from("results").select("id").eq("meet_id",e);t&&t.length>0&&await a.OQ.from("results").delete().eq("meet_id",e);let{error:s}=await a.OQ.from("meets").delete().eq("id",e);if(s)throw s;return{deletedResultsCount:(null==t?void 0:t.length)||0}}},i={async getAll(){let{data:e,error:t}=await a.OQ.from("courses").select("\n        id,\n        created_at,\n        name,\n        distance_meters,\n        distance_miles,\n        mile_difficulty,\n        xc_time_rating,\n        rating_confidence,\n        rating_last_updated,\n        total_results_count,\n        meets(count)\n      ").order("name");if(t)throw t;return null==e?void 0:e.map(e=>{var t;return{...e,meets_count:(null===(t=e.meets[0])||void 0===t?void 0:t.count)||0}})},async getById(e){let{data:t,error:s}=await a.OQ.from("courses").select("\n        *,\n        meets(*)\n      ").eq("id",e).single();if(s)throw s;return t},async create(e){let{data:t,error:s}=await a.OQ.from("meets").insert({name:e.name,meet_date:e.date,course_id:e.course_id,meet_type:e.meet_type}).select().single();if(s)throw s;return t},async update(e,t){let{data:s,error:r}=await a.OQ.from("courses").update(t).eq("id",e).select().single();if(r)throw r;return s},async delete(e){let{data:t}=await a.OQ.from("meets").select("id").eq("course_id",e);if(t&&t.length>0)throw Error("Cannot delete course. ".concat(t.length," meets use this course. Delete meets first."));let{error:s}=await a.OQ.from("courses").delete().eq("id",e);if(s)throw s;return!0}},c={async getAll(){let{data:e,error:t}=await a.OQ.from("results").select("\n        *,\n        athlete:athletes(first_name, last_name, graduation_year, school:schools(name)),\n        meet:meets(name, meet_date, course:courses(name))\n      ").order("meet_id",{ascending:!1});if(t)throw t;return e},async getAllWithDetails(){let{data:e,error:t}=await a.OQ.from("results_with_details").select("*").order("meet_date",{ascending:!1});if(t)throw t;return e},async getByMeetId(e){let{data:t,error:s}=await a.OQ.from("results").select("\n        *,\n        athlete:athletes(id, first_name, last_name, graduation_year, school:schools(name))\n      ").eq("meet_id",e).order("place_overall");if(s)throw s;return t},async create(e){let{data:t,error:s}=await a.OQ.from("results").insert(e).select("\n        *,\n        athlete:athletes(first_name, last_name, school:schools(name)),\n        meet:meets(name, meet_date)\n      ").single();if(s)throw s;return t},async update(e,t){let{data:s,error:r}=await a.OQ.from("results").update(t).eq("id",e).select("\n        *,\n        athlete:athletes(first_name, last_name, school:schools(name)),\n        meet:meets(name, meet_date)\n      ").single();if(r)throw r;return s},async delete(e){let{error:t}=await a.OQ.from("results").delete().eq("id",e);if(t)throw t;return!0},async deleteMultiple(e){let{error:t}=await a.OQ.from("results").delete().in("id",e);if(t)throw t;return!0},async searchAllResults(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3,s=a.OQ.from("results_with_details").select("*").order("meet_date",{ascending:!1});e&&(s=s.or("first_name.ilike.%".concat(e,"%,last_name.ilike.%").concat(e,"%,school_name.ilike.%").concat(e,"%,meet_name.ilike.%").concat(e,"%")));let{data:r,error:l}=await s.limit(t);if(l)throw l;return r},async getAllWithPagination(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,s=(e-1)*t,{data:r,error:l}=await a.OQ.from("results_with_details").select("*").order("meet_date",{ascending:!1}).range(s,s+t-1);if(l)throw l;return r},async getTotalCount(){let{count:e,error:t}=await a.OQ.from("results_with_details").select("*",{count:"exact",head:!0});if(t)throw t;return e}}},7823:function(e,t,s){"use strict";s.d(t,{OQ:function(){return r}});var a=s(7440);let r=(0,a.eI)("https://nxhsgmujfjdncrconerr.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im54aHNnbXVqZmpkbmNyY29uZXJyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgzMDE2ODEsImV4cCI6MjA3Mzg3NzY4MX0.ZnKjJfe3Fv4Jv-dY-P0-ZnatFpW6DEI7nRUDtQ9wu4o")}},function(e){e.O(0,[872,971,472,744],function(){return e(e.s=9664)}),_N_E=e.O()}]);