(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[533],{6463:function(e,t,s){Promise.resolve().then(s.bind(s,6985))},6985:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var a=s(7437),r=s(2265),l=s(6702),n=s(3082);let o=(0,n.createClientComponentClient)();function i(e){let{params:t}=e,[s,n]=(0,r.useState)(null),[i,d]=(0,r.useState)([]),[c,m]=(0,r.useState)(!0),[h,u]=(0,r.useState)(null),[x,g]=(0,r.useState)(""),[b,f]=(0,r.useState)(""),[y,p]=(0,r.useState)(""),[w,j]=(0,r.useState)(1);(0,r.useEffect)(()=>{v()},[t.id]);let v=async()=>{try{m(!0),u(null);let e=await l.kI.getAll(),s=null==e?void 0:e.find(e=>e.id===t.id);if(!s)throw Error("School not found");n(s);let{data:a,error:r}=await o.from("athletes").select("\n    *,\n    school:schools(id, name)\n  ").eq("current_school_id",t.id).order("last_name");if(r)throw r;d(a)}catch(e){console.error("Error loading school data:",e),u("Failed to load school data")}finally{m(!1)}},N=i.filter(e=>{var t,s,a;let r=!x||(null===(t=e.first_name)||void 0===t?void 0:t.toLowerCase().includes(x.toLowerCase()))||(null===(s=e.last_name)||void 0===s?void 0:s.toLowerCase().includes(x.toLowerCase())),l=!b||e.gender===b,n=!y||(null===(a=e.graduation_year)||void 0===a?void 0:a.toString())===y;return r&&l&&n}),_=N.sort((e,t)=>e.last_name.localeCompare(t.last_name)),k=Math.ceil(_.length/25),O=(w-1)*25,C=O+25,Q=_.slice(O,C),S=[...new Set(i.map(e=>e.gender).filter(Boolean))],I=[...new Set(i.map(e=>e.graduation_year).filter(Boolean))].sort((e,t)=>t-e),A=e=>e?e.toString():"N/A";return c?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-xl font-semibold mb-2",children:"Loading School..."}),(0,a.jsx)("div",{className:"text-gray-600",children:"Getting athlete roster..."})]})}):h||!s?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center max-w-md mx-auto",children:[(0,a.jsx)("div",{className:"text-xl font-semibold mb-2 text-red-600",children:"Error"}),(0,a.jsx)("div",{className:"text-gray-600 mb-4",children:h||"School not found"}),(0,a.jsx)("a",{href:"/schools",className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"Back to Schools"})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsxs)("div",{className:"container mx-auto px-6 py-8",children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("nav",{className:"text-sm text-gray-600",children:[(0,a.jsx)("a",{href:"/",className:"hover:text-red-600",children:"Home"}),(0,a.jsx)("span",{className:"mx-2",children:"/"}),(0,a.jsx)("a",{href:"/schools",className:"hover:text-red-600",children:"Schools"}),(0,a.jsx)("span",{className:"mx-2",children:"/"}),(0,a.jsx)("span",{className:"text-black font-medium",children:s.name})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow mb-6 p-6",children:(0,a.jsx)("div",{className:"flex justify-between items-start",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-black mb-2",children:s.name}),(0,a.jsxs)("div",{className:"text-gray-600",children:[(0,a.jsxs)("div",{children:[i.length," total athletes"]}),(0,a.jsx)("div",{className:"text-sm mt-1",children:S.map(e=>{let t=i.filter(t=>t.gender===e).length;return t>0?"".concat(t," ").concat(e):null}).filter(Boolean).join(" • ")})]})]})})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow mb-6",children:(0,a.jsx)("div",{className:"border-b border-gray-200",children:(0,a.jsxs)("nav",{className:"flex",children:[(0,a.jsx)("div",{className:"px-6 py-4 text-sm font-medium text-blue-600 border-b-2 border-blue-600",children:"Athletes"}),(0,a.jsx)("a",{href:"/schools/".concat(s.id,"/records"),className:"px-6 py-4 text-sm font-medium text-gray-500 hover:text-gray-700 border-b-2 border-transparent hover:border-gray-300",children:"Records & PRs"}),(0,a.jsx)("a",{href:"/schools/".concat(s.id,"/seasons"),className:"px-6 py-4 text-sm font-medium text-gray-500 hover:text-gray-700 border-b-2 border-transparent hover:border-gray-300",children:"Season History"}),(0,a.jsx)("a",{href:"/schools/".concat(s.id,"/results"),className:"px-6 py-4 text-sm font-medium text-gray-500 hover:text-gray-700 border-b-2 border-transparent hover:border-gray-300",children:"Season Results"}),(0,a.jsx)("a",{href:"/schools/".concat(s.id,"/team-selection"),className:"px-6 py-4 text-sm font-medium text-gray-500 hover:text-gray-700 border-b-2 border-transparent hover:border-gray-300",children:"Team Selection"})]})})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow mb-6 p-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Athletes"}),(0,a.jsx)("input",{type:"text",value:x,onChange:e=>{g(e.target.value),j(1)},placeholder:"Search by name...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-red-500 focus:border-red-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gender"}),(0,a.jsxs)("select",{value:b,onChange:e=>{f(e.target.value),j(1)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-red-500 focus:border-red-500",children:[(0,a.jsx)("option",{value:"",children:"All Genders"}),S.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Graduation Year"}),(0,a.jsxs)("select",{value:y,onChange:e=>{p(e.target.value),j(1)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-red-500 focus:border-red-500",children:[(0,a.jsx)("option",{value:"",children:"All Years"}),I.map(e=>(0,a.jsxs)("option",{value:e.toString(),children:["Class of ",e]},e))]})]}),(0,a.jsx)("div",{className:"flex items-end",children:(0,a.jsx)("button",{onClick:()=>{g(""),f(""),p(""),j(1)},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Clear Filters"})})]})}),(0,a.jsxs)("div",{className:"mb-4 text-sm text-gray-600",children:["Showing ",O+1,"-",Math.min(C,_.length)," of ",_.length," athletes"]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"p-6 border-b",children:(0,a.jsx)("h2",{className:"text-2xl font-bold text-black",children:"School Roster"})}),0===_.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-gray-500 mb-4",children:"No athletes found matching your criteria."}),(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"Try adjusting your search or filters."})]}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b text-left bg-gray-50",children:[(0,a.jsx)("th",{className:"py-3 px-4 font-bold text-black",children:"Athlete Name"}),(0,a.jsx)("th",{className:"py-3 px-4 font-bold text-black",children:"Class"}),(0,a.jsx)("th",{className:"py-3 px-4 font-bold text-black",children:"Gender"}),(0,a.jsx)("th",{className:"py-3 px-4 font-bold text-black",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:Q.map(e=>(0,a.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsxs)("a",{href:"/athletes/".concat(e.id),className:"font-bold text-red-600 hover:text-red-800 transition-colors",children:[e.last_name,", ",e.first_name]})}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded text-sm bg-gray-100 text-gray-800",children:A(e.graduation_year)})}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded text-sm font-semibold ".concat("Boys"===e.gender||"M"===e.gender?"bg-blue-100 text-blue-800":"Girls"===e.gender||"F"===e.gender?"bg-pink-100 text-pink-800":"bg-gray-100 text-gray-800"),children:e.gender||"N/A"})}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsx)("a",{href:"/athletes/".concat(e.id),className:"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700 transition-colors",children:"View Profile"})})]},e.id))})]})})]}),k>1&&(0,a.jsxs)("div",{className:"flex items-center justify-between mt-8 pt-4 border-t",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Page ",w," of ",k]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>j(1),disabled:1===w,className:"px-3 py-2 border rounded text-black disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"First"}),(0,a.jsx)("button",{onClick:()=>j(Math.max(1,w-10)),disabled:w<=10,className:"px-3 py-2 border rounded text-black disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"-10"}),(0,a.jsx)("button",{onClick:()=>j(Math.max(1,w-5)),disabled:w<=5,className:"px-3 py-2 border rounded text-black disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"-5"}),(0,a.jsx)("button",{onClick:()=>j(Math.max(1,w-1)),disabled:1===w,className:"px-3 py-2 border rounded text-black disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),(0,a.jsx)("button",{onClick:()=>j(Math.min(k,w+1)),disabled:w===k,className:"px-3 py-2 border rounded text-black disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"}),(0,a.jsx)("button",{onClick:()=>j(Math.min(k,w+5)),disabled:w>k-5,className:"px-3 py-2 border rounded text-black disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"+5"}),(0,a.jsx)("button",{onClick:()=>j(Math.min(k,w+10)),disabled:w>k-10,className:"px-3 py-2 border rounded text-black disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"+10"}),(0,a.jsx)("button",{onClick:()=>j(k),disabled:w===k,className:"px-3 py-2 border rounded text-black disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Last"})]})]}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)("a",{href:"/schools",className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 transition-colors",children:"← Back to All Schools"})})]})})}},6702:function(e,t,s){"use strict";s.d(t,{Ab:function(){return i},Bj:function(){return n},jZ:function(){return r},kI:function(){return l},kd:function(){return o}});var a=s(7823);let r={async getAll(){let{data:e,error:t}=await a.OQ.from("athletes").select("\n        *,\n        school:schools(id, name)\n      ").order("last_name");if(t)throw t;return e},async getById(e){let{data:t,error:s}=await a.OQ.from("athletes").select("\n        *,\n        school:schools(*)\n      ").eq("id",e).single();if(s)throw s;return t},async getTotalCount(){let{count:e,error:t}=await a.OQ.from("athletes").select("*",{count:"exact",head:!0});if(t)throw t;return e},async create(e){let{data:t,error:s}=await a.OQ.from("athletes").insert(e).select("\n        *,\n        school:schools(name)\n      ").single();if(s)throw s;return t},async update(e,t){let{data:s,error:r}=await a.OQ.from("athletes").update(t).eq("id",e).select("\n        *,\n        school:schools(name)\n      ").single();if(r)throw r;return s}},l={async getAll(){let{data:e,error:t}=await a.OQ.from("schools").select("*").order("name");if(t)throw t;return e}},n={async getAll(){let{data:e,error:t}=await a.OQ.from("meets").select("\n        *,\n        races(\n          id,\n          name,\n          category,\n          gender,\n          total_participants,\n          course:courses(name)\n        )\n      ").order("meet_date",{ascending:!1});if(t)throw t;return e},async getById(e){let{data:t,error:s}=await a.OQ.from("meets").select("\n        *,\n        course:courses(*),\n        results(\n          *,\n          athlete:athletes(\n            *,\n            school:schools(name)\n          )\n        )\n      ").eq("id",e).single();if(s)throw s;return t},async create(e){let t={name:e.name,meet_date:e.date,course_id:e.course_id,meet_type:e.meet_type,weather_conditions:e.weather_conditions},{data:s,error:r}=await a.OQ.from("meets").insert(t).select("\n      *,\n      course:courses(name)\n    ").single();if(r)throw r;return s},async update(e,t){let{data:s,error:r}=await a.OQ.from("meets").update(t).eq("id",e).select("\n        *,\n        course:courses(name)\n      ").single();if(r)throw r;return s},async delete(e){let{data:t}=await a.OQ.from("results").select("id").eq("meet_id",e);t&&t.length>0&&await a.OQ.from("results").delete().eq("meet_id",e);let{error:s}=await a.OQ.from("meets").delete().eq("id",e);if(s)throw s;return{deletedResultsCount:(null==t?void 0:t.length)||0}}},o={async getAll(){let{data:e,error:t}=await a.OQ.from("courses").select("\n        id,\n        created_at,\n        name,\n        distance_meters,\n        distance_miles,\n        mile_difficulty,\n        xc_time_rating,\n        rating_confidence,\n        rating_last_updated,\n        total_results_count,\n        meets(count)\n      ").order("name");if(t)throw t;return null==e?void 0:e.map(e=>{var t;return{...e,meets_count:(null===(t=e.meets[0])||void 0===t?void 0:t.count)||0}})},async getById(e){let{data:t,error:s}=await a.OQ.from("courses").select("\n        *,\n        meets(*)\n      ").eq("id",e).single();if(s)throw s;return t},async create(e){let{data:t,error:s}=await a.OQ.from("meets").insert({name:e.name,meet_date:e.date,course_id:e.course_id,meet_type:e.meet_type}).select().single();if(s)throw s;return t},async update(e,t){let{data:s,error:r}=await a.OQ.from("courses").update(t).eq("id",e).select().single();if(r)throw r;return s},async delete(e){let{data:t}=await a.OQ.from("meets").select("id").eq("course_id",e);if(t&&t.length>0)throw Error("Cannot delete course. ".concat(t.length," meets use this course. Delete meets first."));let{error:s}=await a.OQ.from("courses").delete().eq("id",e);if(s)throw s;return!0}},i={async getAll(){let{data:e,error:t}=await a.OQ.from("results").select("\n        *,\n        athlete:athletes(first_name, last_name, graduation_year, school:schools(name)),\n        meet:meets(name, meet_date, course:courses(name))\n      ").order("meet_id",{ascending:!1});if(t)throw t;return e},async getAllWithDetails(){let{data:e,error:t}=await a.OQ.from("results_with_details").select("*").order("meet_date",{ascending:!1});if(t)throw t;return e},async getByMeetId(e){let{data:t,error:s}=await a.OQ.from("results").select("\n        *,\n        athlete:athletes(id, first_name, last_name, graduation_year, school:schools(name))\n      ").eq("meet_id",e).order("place_overall");if(s)throw s;return t},async create(e){let{data:t,error:s}=await a.OQ.from("results").insert(e).select("\n        *,\n        athlete:athletes(first_name, last_name, school:schools(name)),\n        meet:meets(name, meet_date)\n      ").single();if(s)throw s;return t},async update(e,t){let{data:s,error:r}=await a.OQ.from("results").update(t).eq("id",e).select("\n        *,\n        athlete:athletes(first_name, last_name, school:schools(name)),\n        meet:meets(name, meet_date)\n      ").single();if(r)throw r;return s},async delete(e){let{error:t}=await a.OQ.from("results").delete().eq("id",e);if(t)throw t;return!0},async deleteMultiple(e){let{error:t}=await a.OQ.from("results").delete().in("id",e);if(t)throw t;return!0},async searchAllResults(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3,s=a.OQ.from("results_with_details").select("*").order("meet_date",{ascending:!1});e&&(s=s.or("first_name.ilike.%".concat(e,"%,last_name.ilike.%").concat(e,"%,school_name.ilike.%").concat(e,"%,meet_name.ilike.%").concat(e,"%")));let{data:r,error:l}=await s.limit(t);if(l)throw l;return r},async getAllWithPagination(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,s=(e-1)*t,{data:r,error:l}=await a.OQ.from("results_with_details").select("*").order("meet_date",{ascending:!1}).range(s,s+t-1);if(l)throw l;return r},async getTotalCount(){let{count:e,error:t}=await a.OQ.from("results_with_details").select("*",{count:"exact",head:!0});if(t)throw t;return e}}},7823:function(e,t,s){"use strict";s.d(t,{OQ:function(){return r}});var a=s(7440);let r=(0,a.eI)("https://nxhsgmujfjdncrconerr.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im54aHNnbXVqZmpkbmNyY29uZXJyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgzMDE2ODEsImV4cCI6MjA3Mzg3NzY4MX0.ZnKjJfe3Fv4Jv-dY-P0-ZnatFpW6DEI7nRUDtQ9wu4o")}},function(e){e.O(0,[872,82,971,472,744],function(){return e(e.s=6463)}),_N_E=e.O()}]);