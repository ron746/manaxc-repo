(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[598],{1927:function(e,t,s){Promise.resolve().then(s.bind(s,5032))},5032:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var a=s(7437),n=s(2265),r=s(7823);class l{static timeToHundredths(e){if(!e||"string"!=typeof e)return null;let t=e.split(":");if(2!==t.length)return null;let s=parseInt(t[0]),a=t[1];if(isNaN(s))return null;if(a.includes(".")){let[e,t]=a.split("."),n=parseInt(e);if(1===t.length){let e=parseInt(t);return 6e3*s+100*n+10*e}if(2===t.length){let e=parseInt(t);return 6e3*s+100*n+e}}else{let e=parseInt(a);return 6e3*s+100*e}return null}static hundredthsToDisplay(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(!e)return"";let s=e/100,a=Math.floor(s/60),n=s%60;return t?"".concat(a,":").concat(n.toFixed(2).padStart(5,"0")):"".concat(a,":").concat(n.toFixed(1).padStart(4,"0"))}static smartDisplay(e){if(!e)return"";let t=e%10==0;return t?this.hundredthsToDisplay(e,!1):this.hundredthsToDisplay(e,!0)}static getPrecisionLevel(e){return e?e%100==0?"seconds":e%10==0?"tenths":"hundredths":"unknown"}}console.log("TIME CONVERSION TESTS:"),console.log("Input      → Hundredths → Smart Display → Precision"),console.log("---------------------------------------------------"),[{input:"22:42.0",expected:136200,type:"historical"},{input:"18:26.0",expected:110600,type:"historical"},{input:"15:37.4",expected:93740,type:"historical"},{input:"16:30.25",expected:99025,type:"future"},{input:"17:45.67",expected:106567,type:"future"},{input:"15:23.00",expected:92300,type:"future"},{input:"20:15",expected:121500,type:"basic"}].forEach(e=>{let t=l.timeToHundredths(e.input),s=t?l.smartDisplay(t):"",a=t?l.getPrecisionLevel(t):"unknown";console.log("".concat(e.input.padEnd(10)," → ").concat((null!==t?t.toString():"").padEnd(8)," → ").concat(s.padEnd(11)," → ").concat(a))}),console.log("\nDatabase Schema Recommendation:"),console.log("- time_hundredths: INTEGER (always normalized to hundredths)"),console.log("- precision_level: VARCHAR (seconds/tenths/hundredths)"),console.log("- Use smartDisplay() for showing times in UI");let i=e=>l.hundredthsToDisplay(e);function c(e){let t=new Date(e),s=t.getFullYear(),a=t.getMonth()+1;return a>=7?s:s-1}function d(e,t){let s=function(e,t){let s=c(t),a=12-(e-(s+1));return a>=9&&a<=12?a:a<9?Math.max(a,6):a>12?13:a}(e,t);return s>=9&&s<=12?s.toString():s<9?"MS":s>12?"PG":s.toString()}function o(e){return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}function m(e){return"".concat(Math.floor(e/60),":").concat(Math.floor(e%60).toString().padStart(2,"0"))}function x(e,t){switch(t){case"date":return new Date(e.meet_date).getTime();case"meet":return e.meet_name.toLowerCase();case"course":return e.course_name.toLowerCase();case"distance":return e.distance_miles;case"time":return e.time_seconds;case"pace":return e.time_seconds/e.distance_miles/100;case"mileEquiv":return e.time_seconds/e.distance_miles/100/e.mile_difficulty;case"xcTime":return e.time_seconds*e.xc_time_rating;case"place":return e.place_overall;case"season":return e.season_year;default:return 0}}function h(e){var t;let{params:s}=e,[l,c]=(0,n.useState)(null),[h,u]=(0,n.useState)([]),[p,g]=(0,n.useState)(!0),[y,j]=(0,n.useState)(null),[f,v]=(0,n.useState)(null);(0,n.useEffect)(()=>{_()},[s.id]);let _=async()=>{try{g(!0),j(null);let{data:e,error:t}=await r.OQ.from("athletes").select("\n          id,\n          first_name,\n          last_name,\n          graduation_year,\n          gender,\n          current_school_id,\n          schools (\n            name\n          )\n        ").eq("id",s.id).single();if(t||!e){j("Athlete not found");return}let a={...e,schools:Array.isArray(e.schools)?e.schools[0]:e.schools};c(a);let{data:n,error:l}=await r.OQ.from("results_with_details").select("*").eq("athlete_id",s.id).order("meet_date",{ascending:!1});if(l){console.error("Results error:",l),j("Failed to load race results");return}u(n||[]),console.log("Loaded results:",n)}catch(e){console.error("Error loading athlete data:",e),j("Failed to load athlete data")}finally{g(!1)}},N=e=>{let t="asc";f&&f.key===e&&"asc"===f.direction&&(t="desc"),v({key:e,direction:t})},b=e=>{let{sortKey:t,children:s}=e,n=(null==f?void 0:f.key)===t,r=n?f.direction:null;return(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>N(t),children:(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("span",{children:s}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("svg",{className:"w-3 h-3 ".concat(n&&"asc"===r?"text-blue-600":"text-gray-300"),fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z"})}),(0,a.jsx)("svg",{className:"w-3 h-3 -mt-1 ".concat(n&&"desc"===r?"text-blue-600":"text-gray-300"),fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"})})]})]})})};if(p)return(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:"Loading..."});if(y||!l)return(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:["Error: ",y||"Athlete not found"]});let w=function(e){let t=new Map;return e.forEach(e=>{let s=e.course_name,a=t.get(s);(!a||e.time_seconds<a.best_time)&&t.set(s,{distance_miles:e.distance_miles,best_time:e.time_seconds,meet_name:e.meet_name,meet_date:e.meet_date,course_name:e.course_name})}),Array.from(t.values()).sort((e,t)=>e.course_name.localeCompare(t.course_name))}(h),S=h.filter(e=>2025===e.season_year).sort((e,t)=>new Date(e.meet_date).getTime()-new Date(t.meet_date).getTime()),I=S.map(e=>e.time_seconds*e.xc_time_rating),T={races:S.length,avgTime:I.length>0?I.reduce((e,t)=>e+t,0)/I.length:0,bestTime:I.length>0?Math.min(...I):0,improvement:I.length>=2?I[0]-I[I.length-1]:0};return(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-gray-900",children:[l.first_name," ",l.last_name]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-gray-600",children:[(0,a.jsx)("span",{className:"font-medium",children:l.schools.name}),(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("span",{children:d(l.graduation_year,new Date().toISOString())}),(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("span",{children:["Class of ",(t=l.graduation_year)<100?t<50?"20".concat(t.toString().padStart(2,"0")):"19".concat(t):t.toString()]}),(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-sm font-medium",children:"M"===l.gender?"Boys":"Girls"})]})]})})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Course PRs"}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mb-3",children:"Personal best time on each course"}),w.length>0?(0,a.jsx)("div",{className:"space-y-3",children:w.map((e,t)=>(0,a.jsxs)("div",{className:"border-l-4 border-blue-500 pl-4",children:[(0,a.jsx)("div",{className:"flex justify-between items-start",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-bold text-lg text-gray-900",children:i(e.best_time)}),(0,a.jsx)("div",{className:"font-medium text-sm text-gray-700",children:e.course_name}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[e.distance_miles," miles"]})]})}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[e.meet_name," • ",o(e.meet_date)]})]},t))}):(0,a.jsx)("p",{className:"text-gray-500",children:"No race results found."})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:[2025," Season"]}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mb-3",children:"XC equivalent times (Crystal Springs 2.95-mile standard)"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:T.races}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Races"})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:T.bestTime>0?i(T.bestTime):"--"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Season Best"})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:T.avgTime>0?i(Math.round(T.avgTime)):"--"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Avg Time"})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded",children:[(0,a.jsx)("div",{className:"text-2xl font-bold ".concat(T.improvement>0?"text-green-600":T.improvement<0?"text-red-600":"text-gray-400"),children:0!==T.improvement&&T.races>=2?(T.improvement>0?"-":"+")+i(Math.abs(T.improvement)):"--"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Improvement"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Season Progression"}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mb-3",children:"Times shown as XC equivalent (Crystal Springs 2.95-mile standard)"}),S.length>0?(0,a.jsx)("div",{className:"space-y-2",children:S.map((e,t)=>{let s=e.time_seconds*e.xc_time_rating,n=t>0&&s<S[t-1].time_seconds*S[t-1].xc_time_rating,r=w.some(t=>t.best_time===e.time_seconds&&t.distance_miles===e.distance_miles);return(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 hover:bg-gray-50 rounded",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[i(Math.round(s)),(0,a.jsxs)("span",{className:"ml-2 text-xs text-gray-400",children:["(",i(e.time_seconds),")"]}),r&&(0,a.jsx)("span",{className:"ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded",children:"PR"}),n&&(0,a.jsx)("span",{className:"ml-2 text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:"↗"})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["#",e.place_overall," • ",o(e.meet_date)," • ",e.course_name]}),(0,a.jsxs)("div",{className:"text-xs text-gray-400",children:["Course difficulty: ",e.mile_difficulty,"x vs track mile"]})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-400 text-right",children:[e.distance_miles,"mi"]})]},e.id)})}):(0,a.jsxs)("p",{className:"text-gray-500",children:["No races in ",2025," season."]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mt-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"All Race Results"}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Found ",h.length," race results"]})}),h.length>0?(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)(b,{sortKey:"date",children:"Date"}),(0,a.jsx)(b,{sortKey:"meet",children:"Meet"}),(0,a.jsx)(b,{sortKey:"course",children:"Course"}),(0,a.jsx)(b,{sortKey:"distance",children:"Distance"}),(0,a.jsx)(b,{sortKey:"time",children:"Time"}),(0,a.jsx)(b,{sortKey:"pace",children:"Pace"}),(0,a.jsx)(b,{sortKey:"mileEquiv",children:"Mile Equiv"}),(0,a.jsx)(b,{sortKey:"xcTime",children:"XC Time"}),(0,a.jsx)(b,{sortKey:"place",children:"Place"}),(0,a.jsx)(b,{sortKey:"season",children:"Season"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:(f?[...h].sort((e,t)=>{let s=x(e,f.key),a=x(t,f.key);return s<a?"asc"===f.direction?-1:1:s>a?"asc"===f.direction?1:-1:0}):h).map(e=>{let t=w.some(t=>t.best_time===e.time_seconds&&t.distance_miles===e.distance_miles),s=e.time_seconds*e.xc_time_rating,n=e.time_seconds/e.distance_miles/100,r=n/e.mile_difficulty;return(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:o(e.meet_date)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,a.jsx)("a",{href:"/meets/".concat(e.meet_id),className:"text-blue-600 hover:text-blue-800 hover:underline",children:e.meet_name})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[e.course_name,(0,a.jsxs)("div",{className:"text-xs text-gray-400",children:[e.mile_difficulty,"x difficulty"]})]}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[e.distance_miles," miles"]}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[i(e.time_seconds),t&&(0,a.jsx)("span",{className:"ml-2 text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded",children:"PR"})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:m(n)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:m(r)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:i(Math.round(s))}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["#",e.place_overall]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.season_year})]},e.id)})})]})}):(0,a.jsx)("p",{className:"text-gray-500",children:"No race results found."})]})]})}console.log("Testing academic year conversion:"),console.log("Race on 2025-09-25 academic year:",c("2025-09-25")),console.log("Testing grade conversion for 2026 graduate:"),console.log("In Sept 2025 race =",d(2026,"2025-09-25"),"grade"),console.log("In Sept 2024 race =",d(2026,"2024-09-25"),"grade"),console.log("In Sept 2023 race =",d(2026,"2023-09-25"),"grade"),console.log("In Sept 2022 race =",d(2026,"2022-09-25"),"grade"),console.log("Testing grade conversion for 2029 graduate:"),console.log("In Sept 2025 race =",d(2029,"2025-09-25"),"grade"),console.log("In Sept 2026 race =",d(2029,"2026-09-25"),"grade")},7823:function(e,t,s){"use strict";s.d(t,{OQ:function(){return n}});var a=s(7440);let n=(0,a.eI)("https://nxhsgmujfjdncrconerr.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im54aHNnbXVqZmpkbmNyY29uZXJyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgzMDE2ODEsImV4cCI6MjA3Mzg3NzY4MX0.ZnKjJfe3Fv4Jv-dY-P0-ZnatFpW6DEI7nRUDtQ9wu4o")}},function(e){e.O(0,[872,971,472,744],function(){return e(e.s=1927)}),_N_E=e.O()}]);